# ============================================
# Illoominate Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# ============================================
# Go API Configuration
# ============================================

# Server
PORT=8080
ENV=development
LOG_LEVEL=debug

# Allowed CORS origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# ============================================
# Supabase Configuration
# ============================================

# Supabase project URL (local: http://127.0.0.1:54321)
SUPABASE_URL=http://127.0.0.1:54321

# Supabase anonymous key (safe to expose in frontend)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# Supabase service role key (NEVER expose in frontend!)
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# Supabase JWT secret for validating tokens
SUPABASE_JWT_SECRET=super-secret-jwt-token-with-at-least-32-characters-long

# ============================================
# Database Configuration
# ============================================

# Direct database connection (for migrations and direct queries)
# Local Supabase uses port 54322
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres

# Connection pool settings
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# ============================================
# Google Cloud Storage Configuration
# ============================================

# GCS bucket for attachments
GCS_BUCKET=illoominate-attachments-dev

# GCP project ID
GCS_PROJECT_ID=your-gcp-project-id

# Path to service account credentials JSON
# For local dev, you can use: gcloud auth application-default login
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Signed URL expiration times
GCS_UPLOAD_URL_EXPIRY=15m
GCS_DOWNLOAD_URL_EXPIRY=1h

# ============================================
# Rate Limiting Configuration
# ============================================

RATE_LIMIT_ENABLED=true

# Redis URL for distributed rate limiting (optional for local dev)
# If not set, uses in-memory rate limiting
REDIS_URL=

# Rate limits (requests per minute)
RATE_LIMIT_SDK_IDENTIFY=100
RATE_LIMIT_SDK_FEEDBACK=10
RATE_LIMIT_VOTE=30
RATE_LIMIT_COMMENT=10
RATE_LIMIT_GENERAL=300

# ============================================
# SDK Token Configuration
# ============================================

# Secret for signing SDK tokens (min 32 characters)
SDK_TOKEN_SECRET=your-sdk-token-secret-at-least-32-chars

# SDK token expiration
SDK_TOKEN_EXPIRY=24h

# ============================================
# Frontend Configuration (Vite)
# ============================================

# These are prefixed with VITE_ to be available in the React app

VITE_API_URL=http://localhost:8080/api
VITE_SUPABASE_URL=http://127.0.0.1:54321
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# ============================================
# Testing
# ============================================

# JWT for testing API endpoints (generate a valid one from Supabase)
TEST_JWT=

# Test project key
TEST_PROJECT_KEY=

# ============================================
# Deployment (Cloud Run)
# ============================================

# GCP Project ID for deployment
GCP_PROJECT_ID=your-gcp-project-id

# Cloud Run region
GCP_REGION=us-central1
